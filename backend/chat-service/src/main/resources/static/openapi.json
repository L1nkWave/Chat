{
  "openapi": "3.0.3",
  "info": {
    "title": "LW Chat Service",
    "description": "This API exposes end-points for chats data management",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "http://localhost:8083/{basePath}",
      "variables": {
        "basePath": {
          "default": "api"
        }
      }
    }
  ],
  "paths": {
    "/v1/chats": {
      "get": {
        "tags": ["Chat"],
        "summary": "Retrieve a portion of user chats",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/offset"
          },
          {
            "$ref": "#/components/parameters/limit"
          }
        ],
        "responses": {
          "200": {
            "description": "A portion of selected user chats",
            "headers": {
              "X-Total-Count": {
                "description": "Represents the number of all user chats"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "anyOf": [
                      {
                        "$ref": "#/components/schemas/ChatDto"
                      },
                      {
                        "$ref": "#/components/schemas/GroupChatDto"
                      }
                    ]
                  }
                }
              }
            }
          },
          "400": {
            "description": "In case when token is not present or not valid",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                },
                "example": {
                  "path": "/api/v1/chats",
                  "message": "Access token is invalid",
                  "status": 400,
                  "timestamp": 1709745915.261717800
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Chat"],
        "summary": "Create duo chat",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/NewChatRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Duo chat successfully created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NewChatDto"
                }
              }
            }
          },
          "400": {
            "description": "This response indicates that chat with specified recipient was already created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                },
                "example": {
                  "path": "/api/v1/chats",
                  "message": "Chat already exists",
                  "status": 400,
                  "timestamp": 1709746791.324618600
                }
              }
            }
          }
        }
      }
    },
    "/v1/chats/{id}/exists": {
      "parameters": [
        {
          "$ref": "#/components/parameters/id"
        },
        {
          "$ref": "#/components/parameters/recipientId"
        }
      ],
      "get": {
        "tags": ["Chat"],
        "summary": "Check if duo chat exists between request initiator and recipient",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "204": {
            "description": "Duo chat exists"
          },
          "404": {
            "description": "Duo chat does not exist",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                },
                "examples": {
                  "example 1": {
                    "value": {
                      "path": "/api/v1/chats/65fca80ea94fa31e8a26f98/group/member",
                      "message": "Requested chat not found",
                      "status": 404,
                      "timestamp": 1711102257.635504100
                    }
                  },
                  "example 2": {
                    "value": {
                      "path": "/api/v1/chats/65fca80ea94fa31e8a26f98/group/member",
                      "message": "Membership is not confirmed",
                      "status": 404,
                      "timestamp": 1711102257.635504100
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/v1/chats/ids": {
      "get": {
        "tags": ["Chat"],
        "summary": "Get ids of all user chats",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Received all chats ids that request initiator is involved in",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "65e8366ac2232573dce8e263",
                    "65e837055f5dba18fffd2db4",
                    "65e8a9f2404b9356a273e303",
                    "65e8b0e4404b9356a273e305",
                    "65ea20a04926ec4620023d13",
                    "65ecd82cf8702942acee3e0f",
                    "65ed725dc636007bd4027c80",
                    "65ed72c7c636007bd4027c82"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/v1/chats/group": {
      "post": {
        "tags": ["Chat"],
        "summary": "Create group chat",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/NewGroupChatRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "The group chat was successfully created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GroupChatDto"
                }
              }
            }
          }
        }
      }
    },
    "/v1/chats/{id}/group": {
      "parameters": [
        {
          "$ref": "#/components/parameters/id"
        }
      ],
      "get": {
        "tags": ["Chat"],
        "summary": "Get group chat details by ID",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "The response whose body contains details of required group chat",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GroupChatDetailsDto"
                }
              }
            }
          }
        }
      }
    },
    "/v1/chats/{id}/group/member": {
      "parameters": [
        {
          "$ref": "#/components/parameters/id"
        }
      ],
      "get": {
        "tags": ["Chat"],
        "summary": "Check if request initiator is a member of group chat",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "204": {
            "description": "Membership is confirmed"
          },
          "404": {
            "description": "Membership is not confirmed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                },
                "examples": {
                  "example 1": {
                    "value": {
                      "path": "/api/v1/chats/65fca80ea94fa31e8a26f98/group/member",
                      "message": "Requested chat not found",
                      "status": 404,
                      "timestamp": 1711102257.635504100
                    }
                  },
                  "example 2": {
                    "value": {
                      "path": "/api/v1/chats/65fca80ea94fa31e8a26f98/group/member",
                      "message": "Membership is not confirmed",
                      "status": 404,
                      "timestamp": 1711102257.635504100
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/v1/chats/{id}/group/members": {
      "parameters": [
        {
          "$ref": "#/components/parameters/id"
        }
      ],
      "post": {
        "tags": ["Chat"],
        "summary": "Add request initiator to members of the group chat",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "201": {
            "description": "Successfully added to the group chat members",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChatMemberDto"
                }
              }
            }
          },
          "400": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                },
                "example": {
                  "path": "/api/v1/chats/65e8b0e4404b9356a273e305/group/join",
                  "message": "You are already a member",
                  "status": 400,
                  "timestamp": 1710509795.022129700
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Chat"],
        "summary": "Remove request initiator from group chat members",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "204": {
            "description": "Successfully removed from members"
          },
          "404": {
            "description": "Request initiator is not a member of the group chat",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                },
                "example": {
                  "path": "/api/v1/chats/65e8b0e4404b9356a273e305/group/members",
                  "message": "Member not found",
                  "status": 404,
                  "timestamp": 1710510606.279411900
                }
              }
            }
          }
        }
      }
    },
    "/v1/chats/{id}/group/avatar": {
      "parameters": [
        {
          "$ref": "#/components/parameters/id"
        }
      ],
      "get": {
        "tags": ["Chat"],
        "summary": "Retrieve the group chat avatar",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Group chat avatar",
            "content": {
              "image/png": {},
              "image/jpeg": {},
              "image/jpg": {},
              "image/webp": {},
              "image/gif": {}
            }
          },
          "404": {
            "description": "Requested avatar was not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                },
                "example": {
                  "path": "/api/v1/chats/65e8b0e4404b9356a273e305/group/avatar",
                  "message": "Requested resource not found",
                  "status": 404,
                  "timestamp": 1709825321.086538400
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Chat"],
        "summary": "Multipart request to upload group chat avatar",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "object",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Group chat avatar was successfully changed"
          },
          "400": {
            "description": "Common possible errors that may happen during avatar uploading",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                },
                "examples": {
                  "example 1": {
                    "value": {
                      "path": "/api/v1/chats/65e8b0e4404b9356a273e305/group/avatar",
                      "message": "Received file is not an image",
                      "status": 400,
                      "timestamp": 1709820925.785678700
                    }
                  },
                  "example 2": {
                    "value": {
                      "path": "/api/v1/chats/65e8b0e4404b9356a273e305/group/avatar",
                      "message": "Only one file can be uploaded per request",
                      "status": 400,
                      "timestamp": 1709820925.785678700
                    }
                  },
                  "example 3": {
                    "value": {
                      "path": "/api/v1/chats/65e8b0e4404b9356a273e305/group/avatar",
                      "message": "Maximum upload size exceeded",
                      "status": 400,
                      "timestamp": 1709820925.785678700
                    }
                  },
                  "example 4": {
                    "value": {
                      "path": "/api/v1/chats/65e8b0e4404b9356a273e305/group/avatar",
                      "message": "Uploaded file can not be empty",
                      "status": 400,
                      "timestamp": 1709821262.760822800
                    }
                  }
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Chat"],
        "summary": "Delete uploaded group chat avatar",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Uploaded avatar was successfully deleted"
          },
          "404": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                },
                "example": {
                  "path": "/api/v1/chats/65e8b0e4404b935a273e305/group/avatar",
                  "message": "requested chat not found",
                  "status": 404,
                  "timestamp": 1709820925.785678700
                }
              }
            }
          }
        }
      }
    },
    "/v1/chats/{id}/messages": {
      "parameters": [
        {
          "$ref": "#/components/parameters/id"
        }
      ],
      "get": {
        "tags": ["Message"],
        "summary": "Get all chat messages",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Messages were successfully retrieved",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "example": [
                    {
                      "id": "6605608b9df240538d763690",
                      "action": "MESSAGE",
                      "createdAt": 1709751569.410000000,
                      "authorId": 1,
                      "reactions": [],
                      "text": "Hi everyone!",
                      "editedAt": null,
                      "edited": false,
                      "read": true
                    },
                    {
                      "id": "65e8bd1188860555a2bbfa5f",
                      "action": "JOIN",
                      "createdAt": 1709751569.410000000,
                      "authorId": 1,
                      "reactions": [],
                      "read": true
                    }
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Message"],
        "summary": "Save a message that only consists of action as content",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/action"
          }
        ],
        "responses": {
          "201": {
            "description": "The simplest message was successfully created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageCreated"
                }
              }
            }
          },
          "400": {
            "description": "Unsupported action for message",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                },
                "example": {
                  "path": "/api/v1/chats/65e8b0e4404b9356a273e305/messages",
                  "message": "simple message can only contain JOIN or LEAVE as action",
                  "status": 400,
                  "timestamp": 1709751789.612699500
                }
              }
            }
          },
          "403": {
            "description": "Only member of the chat is privileged to send messages to",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                },
                "example": {
                  "path": "/api/v1/chats/65e8b0e4404b9356a273e305/messages",
                  "message": "do not have permissions to access the resource",
                  "status": 403,
                  "timestamp": 1709751789.612699500
                }
              }
            }
          }
        }
      }
    },
    "/v1/chats/{id}/messages/text": {
      "parameters": [
        {
          "$ref": "#/components/parameters/id"
        }
      ],
      "post": {
        "tags": ["Message"],
        "summary": "Save a text message to the chat",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/NewTextMessage"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "The text message was successfully saved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageCreated"
                }
              }
            }
          },
          "403": {
            "description": "Only member of the chat is privileged to send messages to",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                },
                "example": {
                  "path": "/api/v1/chats/65e8b0e4404b9356a273e305/messages/text",
                  "message": "do not have permissions to access the resource",
                  "status": 403,
                  "timestamp": 1709752263.3128679
                }
              }
            }
          }
        }
      }
    },
    "/v1/chats/{id}/messages/file": {
      "parameters": [
        {
          "$ref": "#/components/parameters/id"
        }
      ],
      "post": {
        "tags": ["Message"],
        "summary": "Upload a file as message to the chat",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "array",
                    "items": {
                      "format": "binary"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "The message with attached file was created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreatedFileMessage"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                },
                "examples": {
                  "File is missing" : {
                    "value": {
                      "path": "/api/v1/chats/662ce8cc905e8b2151fca5e2/messages/file",
                      "message": "Uploaded file can not be empty",
                      "status": 400,
                      "timestamp": 1714229719.072462200
                    }
                  },
                  "More than 1 file uploaded": {
                    "value": {
                      "path": "/api/v1/chats/662ce8cc905e8b2151fca5e2/messages/file",
                      "message": "Only one file can be uploaded per request",
                      "status": 400,
                      "timestamp": 1714229719.072462200
                    }
                  },
                  "Not multipart request": {
                    "value": {
                      "path": "/api/v1/chats/662ce8cc905e8b2151fca5e2/messages/file",
                      "message": "Current request is not a multipart request",
                      "status": 400,
                      "timestamp": 1714229719.072462200
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/v1/chats/messages/{id}/file": {
      "parameters": [
        {
          "$ref": "#/components/parameters/id"
        }
      ],
      "get": {
        "tags": ["Message"],
        "summary": "Get file from the message",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Binary file",
            "content": {
              "application/octet-stream": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          },
          "404": {
            "description": "Message not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                },
                "example": {
                  "path": "/api/v1/chats/messages/662d0be46dc0dc6dc0ffa9c/file",
                  "message": "Requested message not found",
                  "status": 404,
                  "timestamp": 1714230719.682893900
                }
              }
            }
          }
        }
      }
    },
    "/v1/chats/{id}/messages/file/own": {
      "parameters": [
        {
          "$ref": "#/components/parameters/id"
        }
      ],
      "get": {
        "tags": ["Message"],
        "summary": "Check if file message was initiated by request initiator",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "query",
            "name": "messageId",
            "schema": {
              "type": "string",
              "nullable": false
            },
            "example": "662d0be46dc0dc6dc0ffa9c5"
          },
          {
            "in": "query",
            "name": "filename",
            "schema": {
              "type": "string",
              "nullable": false
            },
            "example": "masm32v11r.zip"
          },
          {
            "in": "query",
            "name": "contentType",
            "schema": {
              "type": "string",
              "nullable": false
            },
            "example": "application/zip"
          },
          {
            "in": "query",
            "name": "size",
            "schema": {
              "type": "integer",
              "nullable": false,
              "minimum": 0
            },
            "example": "2048"
          }
        ],
        "responses": {
          "200": {
            "description": "File is found"
          },
          "404": {
            "description": "File is not found"
          }
        }
      }
    },
    "/v1/chats/{id}/messages/readers": {
      "parameters": [
        {
          "$ref": "#/components/parameters/id"
        },
        {
          "in": "query",
          "name": "to",
          "description": "ID of the last read message in the chat",
          "schema": {
            "type": "string",
            "nullable": false
          },
          "example": "66054ae5199e5654c9a15799"
        }
      ],
      "post": {
        "tags": ["Message"],
        "summary": "Read a range of chat messages",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Returns ids of read messages",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "nullable": false
                },
                "example": [
                  "660687eb0f2b5c2763c23a60",
                  "660687eb0f2b5c2763c23a61",
                  "660687eb0f2b5c2763c23a62"
                ]
              }
            }
          },
          "403": {
            "description": "Chat membership is not confirmed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                },
                "example": {
                  "path": "/api/v1/chats/messages/660147887cd54a553aae1db5/readers",
                  "message": "Do not have permissions to access the resource",
                  "status": 403,
                  "timestamp": 1711360639.479022400
                }
              }
            }
          },
          "404": {
            "description": "Requested message not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiError"
                },
                "example": {
                  "path": "/api/v1/chats/messages/660147887cd5a553aae1db5/readers",
                  "message": "Requested message not found",
                  "status": 404,
                  "timestamp": 1711360639.479022400
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    },
    "schemas": {
      "ApiError": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "nullable": false
          },
          "status": {
            "type": "integer",
            "nullable": false
          },
          "message": {
            "type": "string",
            "nullable": false
          },
          "timestamp": {
            "type": "number",
            "nullable": false
          }
        }
      },
      "NewChatDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "nullable": false
          },
          "createdAt": {
            "type": "number",
            "nullable": false
          }
        },
        "example": {
          "id": "65ed725dc636007bd4027c80",
          "createdAt": 1710060125.916620300
        }
      },
      "ChatDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "nullable": false
          },
          "type": {
            "type": "string",
            "nullable": false,
            "example": "DUO"
          },
          "createdAt": {
            "type": "number",
            "nullable": false
          },
          "lastMessage": {
            "$ref": "#/components/schemas/TextMessageDto"
          }
        },
        "example": {
          "id": "65ed725dc636007bd4027c80",
          "type": "DUO",
          "createdAt": 1710060125.916620300,
          "lastMessage": {
            "id": "66055236cb761a59d173d978",
            "action": "MESSAGE",
            "createdAt": 1711624758.135000000,
            "author": {
              "id": 1,
              "username": "@mathewmcc",
              "name": "Matthew McConaughey"
            },
            "reactions": [],
            "text": "Hi everyone!",
            "edited": false,
            "isRead": false
          }
        }
      },
      "NewGroupChatDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "nullable": false
          },
          "name": {
            "type": "string",
            "nullable": false
          },
          "createdAt": {
            "type": "number",
            "nullable": false
          }
        },
        "example": {
          "id": "65e8b0e4404b9356a273e305",
          "name": "My group chat",
          "createdAt": 1709748452.204932100
        }
      },
      "GroupChatDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "nullable": false
          },
          "type": {
            "type": "string",
            "nullable": false,
            "example": "GROUP"
          },
          "name": {
            "type": "string",
            "nullable": false
          },
          "avatarPath": {
            "type": "string",
            "nullable": true
          },
          "createdAt": {
            "type": "number",
            "nullable": false
          },
          "lastMessage": {
            "$ref": "#/components/schemas/TextMessageDto"
          }
        },
        "example": {
          "id": "65e8b0e4404b9356a273e305",
          "type": "GROUP",
          "name": "My group chat",
          "avatarPath": null,
          "createdAt": 1709748452.204932100,
          "lastMessage": {
            "id": "66055236cb761a59d173d978",
            "action": "MESSAGE",
            "createdAt": 1711624758.135000000,
            "author": {
              "id": 1,
              "username": "@mathewmcc",
              "name": "Matthew McConaughey"
            },
            "reactions": [],
            "text": "Hi everyone!",
            "edited": false,
            "isRead": false
          }
        }
      },
      "GroupChatDetailsDto": {
        "type": "object",
        "properties": {
          "description": {
            "type": "string",
            "nullable": true,
            "maxLength": 256
          },
          "membersLimit": {
            "type": "integer",
            "nullable": false
          },
          "private": {
            "type": "boolean",
            "nullable": false
          },
          "members": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ChatMemberDto"
            }
          }
        },
        "example": {
          "description": "This is a sample chat description",
          "members": [
            {
              "id": 1,
              "role": "ADMIN",
              "joinedAt": 1709717253.222000000,
              "details": {
                "username": "mathew",
                "name": "Matthew McConaughey",
                "avatarPath": null,
                "online": false
              }
            }
          ],
          "membersLimit": 20,
          "private": true
        }
      },
      "NewChatRequest": {
        "type": "object",
        "properties": {
          "recipient": {
            "type": "integer",
            "nullable": false,
            "minimum": 1
          }
        },
        "example": {
          "recipient": 2
        }
      },
      "NewGroupChatRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "nullable": false,
            "minLength": 1,
            "maxLength": 32
          },
          "description": {
            "type": "string",
            "nullable": true,
            "maxLength": 256
          },
          "isPrivate": {
            "type": "boolean",
            "nullable": false
          }
        },
        "example": {
          "name": "My group chat",
          "description": "This is a sample chat description",
          "isPrivate": true
        }
      },
      "ChatMemberDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "nullable": false
          },
          "role": {
            "type": "string",
            "nullable": false
          },
          "joinedAt": {
            "type": "number",
            "nullable": false
          },
          "details": {
            "$ref": "#/components/schemas/ChatMemberDetailsDto"
          }
        },
        "example": {
          "id": 1,
          "role": "ADMIN",
          "joinedAt": 1709748452.204932100
        }
      },
      "ChatMemberDetailsDto": {
        "type": "object",
        "properties": {
          "username": {
            "type": "string",
            "nullable": false
          },
          "name": {
            "type": "string",
            "nullable": false
          },
          "avatarPath": {
            "type": "string",
            "nullable": true
          },
          "online": {
            "type": "boolean",
            "nullable": false
          }
        },
        "example": {
          "username": "mathew",
          "name": "Matthew McConaughey",
          "avatarPath": null,
          "online": false
        }
      },
      "MessageDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "nullable": false
          },
          "action": {
            "type": "string",
            "nullable": false
          },
          "createdAt": {
            "type": "number",
            "nullable": false
          },
          "author": {
            "$ref": "#/components/schemas/MessageAuthorDto"
          },
          "read": {
            "type": "boolean"
          },
          "reactions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MessageReaction"
            }
          }
        },
        "example": {
          "id": "66055236cb761a59d173d978",
          "action": "MESSAGE",
          "createdAt": 1711624758.135000000,
          "author": {
            "id": 1,
            "username": "@mathewmcc",
            "name": "Matthew McConaughey"
          },
          "reactions": [],
          "read": false
        }
      },
      "TextMessageDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "nullable": false
          },
          "action": {
            "type": "string",
            "nullable": false
          },
          "createdAt": {
            "type": "number",
            "nullable": false
          },
          "author": {
            "$ref": "#/components/schemas/MessageAuthorDto"
          },
          "text": {
            "type": "string",
            "nullable": false
          },
          "edited": {
            "type": "boolean",
            "nullable": false
          },
          "editedAt": {
            "type": "number",
            "nullable": true
          },
          "isRead": {
            "type": "boolean",
            "nullable": false
          },
          "reactions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MessageReaction"
            }
          }
        },
        "example": {
          "id": "66055236cb761a59d173d978",
          "action": "MESSAGE",
          "createdAt": 1711624758.135000000,
          "author": {
            "id": 1,
            "username": "@mathewmcc",
            "name": "Matthew McConaughey"
          },
          "reactions": [],
          "text": "Hi everyone!",
          "edited": false,
          "isRead": true
        }
      },
      "MessageAuthorDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "nullable": false
          },
          "username": {
            "type": "string",
            "nullable": true
          },
          "name": {
            "type": "string",
            "nullable": true
          }
        },
        "example": {
          "id": 1,
          "username": "mathew",
          "name": "Matthew McConaughey"
        }
      },
      "MessageReaction": {
        "type": "object",
        "properties": {
          "memberId": {
            "type": "integer",
            "nullable": false
          },
          "reaction": {
            "type": "string",
            "nullable": false
          },
          "reactedAt": {
            "type": "number",
            "nullable": false
          }
        },
        "example": {
          "memberId": 1,
          "reaction": ":shy:",
          "reactedAt": 1709717096.333000000
        }
      },
      "MessageCreated": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "nullable": false
          },
          "createdAt": {
            "type": "number",
            "nullable": false
          }
        },
        "example": {
          "id": "65e8bd1188860555a2bbfa5f",
          "createdAt": 1709751569.410053400
        }
      },
      "NewTextMessage": {
        "type": "object",
        "properties": {
          "text": {
            "type": "string",
            "nullable": false,
            "minLength": 1,
            "maxLength": 512
          }
        },
        "example": {
          "text": "hello world!"
        }
      },
      "CreatedFileMessage": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "nullable": false
          },
          "createdAt": {
            "type": "number",
            "nullable": false
          },
          "filename": {
            "type": "string",
            "nullable": false
          },
          "contentType": {
            "type": "string",
            "nullable": false
          },
          "size": {
            "type": "integer",
            "nullable": false,
            "minimum": 0
          }
        },
        "example": {
          "id": "662d0be46dc0dc6dc0ffa9c5",
          "createdAt": 1714228196.375171300,
          "filename": "masm32v11r.zip",
          "contentType": "application/zip",
          "size": 5012275
        }
      }
    },
    "headers": {
      "X-Total-Count": {
        "description": "Represents the number of all items",
        "schema": {
          "type": "integer"
        }
      }
    },
    "parameters": {
      "id": {
        "in": "path",
        "name": "id",
        "description": "resource identification",
        "schema": {
          "type": "string",
          "nullable": false
        },
        "example": "65e8b0e4404b9356a273e305"
      },
      "action": {
        "in": "query",
        "name": "message action",
        "schema": {
          "type": "string",
          "nullable": false
        },
        "examples": {
          "example1": {
            "value": "JOIN"
          },
          "example2": {
            "value": "LEAVE"
          }
        }
      },
      "offset": {
        "in": "query",
        "name": "offset",
        "schema": {
          "type": "integer"
        },
        "description": "The number of items to skip before starting to collect the result set",
        "example": 1
      },
      "limit": {
        "in": "query",
        "name": "limit",
        "schema": {
          "type": "integer"
        },
        "description": "The number of items are needed to retrieve",
        "example": 3
      },
      "recipientId": {
        "in": "query",
        "name": "recipient ID",
        "schema": {
          "type": "integer"
        },
        "description": "User ID",
        "example": 26
      }
    }
  }
}
